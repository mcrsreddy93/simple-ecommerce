<!DOCTYPE html>
<html lang="en" data-page="checkout">

<head>
    <meta charset="UTF-8" />
    <title>MyShop - Checkout</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="assets/styles.css" />
</head>

<body data-page="checkout">

    <!-- Top Notification Bar -->
    <div class="top-strip">
        <span>Secure dummy checkout. No real payment is processed.</span>
    </div>

    <!-- Navbar -->
    <header class="navbar">
        <div class="nav-left">
            <a href="index.html" class="brand">
                <span class="brand-logo">ðŸ›’</span>
                <span class="brand-text">MyShop</span>
            </a>
        </div>

        <nav class="nav-center">
            <a href="index.html" class="nav-link">Home</a>
            <a href="index.html#products" class="nav-link">Products</a>
            <a href="cart.html" class="nav-link">Cart</a>
            <a href="checkout.html" class="nav-link active">Checkout</a>
        </nav>

        <div class="nav-right">
            <div id="navUserSection" class="nav-user"></div>
            <a href="admin.html" class="nav-link nav-link-admin">Admin</a>
        </div>
    </header>

    <!-- Checkout Page -->
    <main class="page-shell">
        <section class="section">

            <div class="section-header">
                <div>
                    <h2>Checkout</h2>
                    <p class="section-subtitle">Apply coupon, review summary, enter address & pay.</p>
                </div>
            </div>

            <!-- Grid Layout -->
            <div class="grid-2">

                <!-- LEFT SIDE -->
                <div>

                    <!-- Coupon Section -->
                    <div class="card">
                        <div class="card-header">
                            <h3>Apply Coupon</h3>
                        </div>
                        <div class="card-body">
                            <div class="coupon-box">
                                <input id="couponInput" class="input" placeholder="Enter coupon code" />
                                <button id="applyCouponBtn" class="btn btn-primary">Apply</button>
                            </div>
                            <p id="couponResult" class="coupon-result small-note"></p>
                        </div>
                    </div>

                    <hr />

                    <!-- Order Summary -->
                    <div class="card">
                        <div class="card-header">
                            <h3>Order Summary</h3>
                        </div>

                        <div class="card-body">

                            <div id="checkoutEmptyState" class="empty-state hidden">
                                <p>Your cart is empty.</p>
                                <a href="index.html#products" class="btn btn-primary">Browse Products</a>
                            </div>

                            <table class="table" id="checkoutTable">
                                <thead>
                                    <tr>
                                        <th>Product</th>
                                        <th>Qty</th>
                                        <th>Price</th>
                                        <th>Subtotal</th>
                                    </tr>
                                </thead>
                                <tbody id="checkoutItemsBody">
                                    <!-- Filled by JS -->
                                </tbody>
                            </table>

                            <!-- SUMMARY BREAKDOWN -->
                            <div class="summary-row mt-1">
                                <span>Subtotal</span>
                                <span id="checkoutSubtotal">â‚¹0</span>
                            </div>

                            <div class="summary-row" id="discountRow" style="display:none;">
                                <span>
                                    Discount (<span id="discountCodeLabel"></span>)
                                </span>
                                <span id="discountAmountLabel" class="discount-text">-â‚¹0</span>
                            </div>

                            <div class="summary-row summary-row-total mt-1">
                                <span><strong>Total</strong></span>
                                <span id="checkoutTotal">â‚¹0</span>
                            </div>

                        </div>
                    </div>

                </div>

                <!-- RIGHT SIDE -->
                <div>

                    <!-- Delivery Address -->
                    <h3 class="mb-1">Delivery Address</h3>

                    <form id="addressForm" class="address-form">

                        <input id="addrFullName" class="input" placeholder="Full Name" required />
                        <input id="addrPhone" class="input" placeholder="Phone Number" required />
                        <input id="addrLine1" class="input" placeholder="Address Line 1" required />
                        <input id="addrLine2" class="input" placeholder="Address Line 2" />

                        <div class="form-flex">
                            <input id="addrCity" class="input" placeholder="City" required />
                            <input id="addrState" class="input" placeholder="State" required />
                        </div>

                        <div class="form-flex">
                            <input id="addrPostal" class="input" placeholder="Postal Code" required />
                            <input id="addrCountry" class="input" placeholder="Country" required />
                        </div>

                        <button type="submit" class="btn btn-primary mt-1">Save Address</button>
                    </form>

                    <hr />

                    <!-- Payment Section -->
                    <div class="card mt-2">
                        <div class="card-header">
                            <h3>Payment</h3>
                        </div>

                        <div class="card-body">
                            <form id="checkoutForm" class="form">

                                <div class="form-group">
                                    <label for="paymentMethod">Payment Method</label>
                                    <select id="paymentMethod" class="input input-select" required>
                                        <option value="card">Card (Dummy)</option>
                                        <option value="cod">Cash on Delivery (Dummy)</option>
                                        <option value="upi">UPI (Dummy)</option>
                                    </select>
                                </div>

                                <p class="small-note">
                                    No real payment happens. Backend creates an order and clears your cart.
                                </p>

                                <button type="submit" class="btn btn-primary summary-btn">
                                    Place Order
                                </button>
                            </form>

                            <div id="checkoutResult" class="checkout-result hidden"></div>
                        </div>
                    </div>

                </div>

            </div>
        </section>
    </main>

    <!-- Floating Cart Button -->
    <a href="cart.html" class="floating-cart-btn">
        <span class="icon">ðŸ›’</span>
        <span id="floatingCartCount">0</span>
    </a>

    <!-- Toast -->
    <div id="toast" class="toast hidden"></div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-inner">

            <div>
                <h4>MyShop</h4>
                <p>Simple demo store using Express & SQLite.</p>
            </div>

            <div>
                <h4>Links</h4>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="cart.html">Cart</a></li>
                    <li><a href="checkout.html">Checkout</a></li>
                    <li><a href="admin.html">Admin Panel</a></li>
                </ul>
            </div>

            <div>
                <h4>Account</h4>
                <ul>
                    <li><a href="login.html">Login</a></li>
                    <li><a href="register.html">Register</a></li>
                </ul>
            </div>

        </div>

        <p class="footer-bottom">
            &copy; <span id="footerYear"></span> MyShop. Built for learning.
        </p>
    </footer>

    <!-- Scripts -->
    <script src="assets/app.js"></script>
</body>

</html>
